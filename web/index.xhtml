<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

    <h:head>
        <title>DmxControl</title>
        <script src="javascript.js" />

        <script>        
        
        $(document).ready(function(){
            var element = document.getElementById('idform0:idslide0'); 
            element.addEventListener('touchmove', function (e){
                e.preventDefault();
                var offset = $('#iddiv0').offset();
                var y = e.targetTouches[0].clientY - offset.top;
                var compHeight = $('#iddiv0').height();
                y = 100 - Math.round((y*100)/compHeight);
                PF('varSlider0').setValue(y);
                document.getElementById('idform0:idoutput0').value = y;
                
                handleTouchEvent([{name:'Event', value: y}]);
                
            });    
            
            element = document.getElementById('idform1:idslide1');
            element.addEventListener('touchmove', function(e){
                e.preventDefault();
                var val = document.getElementById('idform1:idtxt1');
                handleTouchEvent([{name: 'Channel1', value: val.value}]);
            });

            element = document.getElementById('idform2:idslide2');
            element.addEventListener('touchmove', function(e){
                e.preventDefault();
                var val = document.getElementById('idform2:idtxt2');
                handleTouchEvent([{name: 'Channel2', value: val.value}]);
            });

            element = document.getElementById('idform3:idslide3');
            element.addEventListener('touchmove', function(e){
                e.preventDefault();
                var val = document.getElementById('idform3:idtxt3');
                handleTouchEvent([{name: 'Channel3', value: val.value}]);
            });

            element = document.getElementById('idform4:idslide4');
            element.addEventListener('touchmove', function(e){
                e.preventDefault();
                var val = document.getElementById('idform4:idtxt4');
                handleTouchEvent([{name: 'Channel4', value: val.value}]);
            });

            element = document.getElementById('idform5:idslide5');
            element.addEventListener('touchmove', function(e){
                e.preventDefault();
                var val = document.getElementById('idform5:idtxt5');
                handleTouchEvent([{name: 'Channel5', value: val.value}]);
            });
            
            element = document.getElementById('idform6:idslide6');
            element.addEventListener('touchmove', function(e){
                e.preventDefault();
                var val = document.getElementById('idform6:idtxt6');
                handleTouchEvent([{name: 'Channel6', value: val.value}]);
            });
            
            element = document.getElementById('idform7:idslide7');
            element.addEventListener('touchmove', function(e){
                e.preventDefault();
                var val = document.getElementById('idform7:idtxt7');
                handleTouchEvent([{name: 'Channel7', value: val.value}]);
            });
            
            element = document.getElementById('idform8:idslidemaster');
            element.addEventListener('touchmove', function(e){
                e.preventDefault();
                var val = document.getElementById('idform8:idtxt8');
                handleTouchEvent([{name: 'Master', value: val.value}]);
            });

        }, false);
            

                
        $(document).on('slide','body',function(e, ui){
            var id = e.target.id;
            
            if (id === 'idform0:idslide0') handleSlideEvent([{name:'Channel 1', value:ui.value}]);
            else if (id === 'idform1:idslide1') handleSlideEvent([{name:'Channel 2', value:ui.value}]);
            else if (id === 'idform2:idslide2') handleSlideEvent([{name:'Channel 3', value:ui.value}]);
            else if (id === 'idform3:idslide3') handleSlideEvent([{name:'Channel 4', value:ui.value}]);
            else if (id === 'idform4:idslide4') handleSlideEvent([{name:'Channel 5', value:ui.value}]);
            else if (id === 'idform5:idslide5') handleSlideEvent([{name:'Channel 6', value:ui.value}]);
            else if (id === 'idform6:idslide6') handleSlideEvent([{name:'Channel 7', value:ui.value}]);
            else if (id === 'idform7:idslide7') handleSlideEvent([{name:'Channel 8', value:ui.value}]);
            else if (id === 'idform8:idslidemaster') handleSlideEvent([{name:'Master', value:ui.value}]);
            
        });
        
        </script>
        
    </h:head>
    <h:body id = "idbody" >
        
            <link rel="stylesheet" type="text/css" href="styleSheet.css" />

            <p:layout id = "idlayout" fullPage="true" >

                <p:layoutUnit position="north" size="120" resizable="true" closable="true" collapsible="true" class = "style_headerpeg">
                    <img src="pegasus.png" class = "style_pegasusimage" />
                    <td>Pegasus Systems</td>
                    <font size = "10" class= "style_headertool" >
                    <td>DmxControl 512 Lighting Tool v 1.0 </td>
                    </font>
                </p:layoutUnit>

                <p:layoutUnit position="south" size="0" closable="true" collapsible="true" class = "style_footertxt">
                    
                </p:layoutUnit>
                
                <p:layoutUnit position="east" size="20%" header="Settings" class = "style_settings" collapsible="true">
                    <h:form>
                    <p:growl id="idmsg" showDetail="true" autoUpdate="true" life="4000" class = "style_message" />
                    
                    <p:messages id = "idmessages_settings" showDetail = "true" closable = "true" autoUpdate= "true" class = "style_message" > 
                        
                    </p:messages>
                    </h:form>
                    <h:form id = "idform">
                    <h:panelGrid id = "idgrid" columns = "2" class = "style_endpoint">
                        
                        <p:outputLabel for = "idnode" value = "IP:" class = "style_label" />
                        <h:inputText id = "idnode" style = "font-family: calibri" class = "style_inputtext" value = "#{data.node}" required = "true" requiredMessage = "Node Must Not Be Empty">            
                            <p:ajax update = "idoutnode"/> 
                            <f:validateBean></f:validateBean>
                            <h:message for = "idnode" id = "idoutnode"  />
                        </h:inputText>
                        
                        
                        <p:outputLabel for = "idport" value = "Port:" class = "style_label" />
                        <h:inputText id = "idport" style = "font-family: calibri" class = "style_inputtext"  value = "#{data.port}" required = "true" requiredMessage = "Port Must Not Be Empty">
                            <p:ajax update = "idoutport"/> 
                            <f:validateBean></f:validateBean>
                            <h:message for = "idport" id = "idoutport"  />                            
                        </h:inputText>
                        
                    </h:panelGrid>
                    <p:commandButton id = "idbtnconnect" value = "Connect" update = "idform" style = "font-family: calibri" styleClass = "style_cmdbutton" actionListener = "#{data.connect()}" >
                        
                        <f:setPropertyActionListener target = "#{data.node}"    value = "#{data.node}" />
                        <f:setPropertyActionListener target = "#{data.port}"    value = "#{data.port}" />
                        
                    </p:commandButton>
                    </h:form>
                </p:layoutUnit>
                
                <p:layoutUnit id = "idlayoutunit" position="center" class = "style_app" >
                    
                    <p:messages id = "idmessages_center" showDetail = "true" class = "style_message" closable = "true" autoUpdate= "true" > 
                    </p:messages>        
                    <h:form>
                    <p:remoteCommand name = "handleSlideEvent" actionListener = "#{data.onSliderEvent()}" />
                    <p:remoteCommand name = "handleTouchEvent" actionListener = "#{data.onTouchEvent()}" />
                    </h:form>
                    
                    <h:panelGrid id = "idgridouter" columns = "9" class = "style_wrapper"  >
                    <h:panelGrid id = "idgridinner" columns="1" class = "style_panelslider" >
                        <h:form id = "idform0">
                        <h:outputText id="idoutput0"  class = "style_output" value="#{data.channel0}%" >
                            
                        </h:outputText>
                        
                        <h:inputHidden id="idtxt0"  value = "#{data.channel0}" binding = "#{input0}" >
                                                        
                        </h:inputHidden>
                        <div id = "iddiv0" >
                        <p:slider class = "classSlide0" widgetVar = "varSlider0" id = 'idslide0' for="idtxt0" display="idoutput0" type = "vertical" styleClass = "style_slider" displayTemplate="{value}%"   >
                            
                        </p:slider>
                        </div>
                        
                        <br></br>
                        <p:commandButton id = "idbtn" value = "Flash 1" style = "font-family: calibri" class = "style_button" actionListener = "#{data.onFlash(0)}" >
                            
                        </p:commandButton>
                        
                        </h:form> 
                    </h:panelGrid>
                    
                    <h:panelGrid columns="1" class = "style_panelslider" >
                        <h:form id = "idform1" >
                        <h:outputText id ="idoutput1" class = "style_output" value="#{data.channel1}%" escape = "false"/>
                        <h:inputHidden id="idtxt1" value="#{data.channel1}" binding = "#{input1}" />
                        <div id = "iddiv1" >
                        <p:slider id = 'idslide1' for="idtxt1" display="idoutput1" type = "vertical" styleClass = "style_slider"   displayTemplate="{value}%"/>
                        </div>
                        <br></br>
                        <p:commandButton value = "Flash 2" style = "font-family: calibri" class = "style_button" actionListener = "#{data.onFlash(1)}" >
                            
                        </p:commandButton>
                        
                        </h:form>
                    </h:panelGrid>
                    
                    <h:panelGrid columns = "1" class = "style_panelslider">
                       <h:form id = "idform2">
                       <h:outputText id = "idoutput2" class = "style_output" value="#{data.channel2}%" escape = "false"/>
                       <h:inputHidden id = "idtxt2" value = "#{data.channel2}" binding = "#{input2}" />
                       <p:slider id = 'idslide2' for = "idtxt2" display = "idoutput2" type= "vertical" styleClass = "style_slider"   displayTemplate="{value}%" />
                       <br></br>
                       <p:commandButton value = "Flash 3" style = "font-family: calibri" class = "style_button"  actionListener = "#{data.onFlash(2)}"/>
                       </h:form>
                    </h:panelGrid>

                    <h:panelGrid columns = "1" class = "style_panelslider">
                       <h:form id = "idform3">
                       <h:outputText id = "idoutput3" class = "style_output" value = "#{data.channel3}%" escape = "false"/>
                       <h:inputHidden id = "idtxt3" value = "#{data.channel3}" binding = "#{input3}" />
                       <p:slider id = 'idslide3' for = "idtxt3" display = "idoutput3" type= "vertical" styleClass = "style_slider"   displayTemplate="{value}%" />
                       <br></br>
                       <p:commandButton value = "Flash 4" style = "font-family: calibri" class = "style_button" actionListener = "#{data.onFlash(3)}" />
                       </h:form>
                    </h:panelGrid>

                    <h:panelGrid columns = "1" class = "style_panelslider">
                       <h:form id = "idform4">
                           <h:outputText id = "idoutput4" class = "style_output" value="#{data.channel4}%" escape = "false"/>
                       <h:inputHidden id = "idtxt4" value = "#{data.channel4}" binding = "#{input4}" />
                       <p:slider id = 'idslide4' for = "idtxt4" display = "idoutput4" type= "vertical" styleClass = "style_slider"   displayTemplate="{value}%" />
                       <br></br>
                       <p:commandButton value = "Flash 5" style = "font-family: calibri" class = "style_button"  actionListener = "#{data.onFlash(4)}"/>
                       </h:form>
                    </h:panelGrid>

                    <h:panelGrid columns = "1" class = "style_panelslider">
                       <h:form id = "idform5">
                           <h:outputText id = "idoutput5" class = "style_output" value="#{data.channel5}%" escape = "false"/>
                       <h:inputHidden id = "idtxt5" value = "#{data.channel5}" binding = "#{input5}" />
                       <p:slider id = 'idslide5' for = "idtxt5" display = "idoutput5" type= "vertical" styleClass = "style_slider"   displayTemplate="{value}%" />
                       <br></br>
                       <p:commandButton value = "Flash 6" style = "font-family: calibri" class = "style_button"  actionListener = "#{data.onFlash(5)}"/>
                       </h:form>
                    </h:panelGrid>
                    
                    <h:panelGrid columns = "1" class = "style_panelslider">
                       <h:form id = "idform6">
                       <h:outputText id = "idoutput6" class = "style_output" value="#{data.channel6}%" escape = "false"/>
                       <h:inputHidden id = "idtxt6" value = "#{data.channel6}" binding = "#{input6}" />
                       <p:slider id = 'idslide6' for = "idtxt6" display = "idoutput6" type= "vertical" styleClass = "style_slider"   displayTemplate="{value}%" />
                       <br></br>
                       <p:commandButton value = "Flash 7" style = "font-family: calibri" class = "style_button"  actionListener = "#{data.onFlash(6)}"/>
                       </h:form>
                    </h:panelGrid>

                    <h:panelGrid columns = "1" class = "style_panelslider">
                       <h:form id = "idform7">
                       <h:outputText id = "idoutput7" class = "style_output" value="#{data.channel7}%" escape = "false"/>
                       <h:inputHidden id = "idtxt7" value = "#{data.channel7}" binding = "#{input7}" />
                       <p:slider id = 'idslide7' for = "idtxt7" display = "idoutput7" type= "vertical" styleClass = "style_slider"   displayTemplate="{value}%" />
                       <br></br>
                       <p:commandButton value = "Flash 8" style = "font-family: calibri" class = "style_button" actionListener = "#{data.onFlash(7)}" />
                       </h:form>
                    </h:panelGrid>

                    <h:panelGrid columns = "1" class = "style_panelslidermaster">
                        <h:form id = "idform8">
                            <h:outputText id = "idoutput10" class = "style_output" value="#{data.channelMaster}%" escape = "false"/>
                        <h:inputHidden id = "idtxt8" value = "#{data.channelMaster}" binding = "#{input8}" />
                        <p:slider id = 'idslidemaster' for = "idtxt8" display = "idoutput10" type= "vertical" styleClass = "style_slider"   displayTemplate="{value}%" />
                        <br></br>
                        <p:commandButton value = "Master" style = "font-family: calibri" class = "style_button"  actionListener = "#{data.onFlash(8)}"/>
                        </h:form>
                    </h:panelGrid>

                    </h:panelGrid>

                </p:layoutUnit>

            </p:layout>
        
    </h:body>
</html>

